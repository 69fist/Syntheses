\begin{lstlisting}[caption= Stubborn link interface, mathescape, captionpos=b]
upon event <Init> do
sent := $\empty$
startTimer(delay)

upon event <Timedout> do
forall (dst, m) $\in$ sent do
trigger <flp2pSend | dst, m>
startTimer(delay)

// Request
upon event <sp2pSend | dest, m> do
send := sent $\cup$ { (dest, m) }

// Indication
upon evetn <sp2pDeliver src, m> do
trigger <sp2pDeliver src, m>
\end{lstlisting}
